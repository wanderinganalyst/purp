{% extends 'base.html' %}

{% block title %}Event Templates - BecauseImStuck{% endblock %}

{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h1 class="h2 mb-1" style="color: var(--royal-purple);">
        <i class="bi bi-file-earmark-richtext-fill"></i> Event Templates
      </h1>
      <p class="text-muted mb-0">Manage reusable event templates with purchasable options</p>
    </div>
    <a href="{{ url_for('events.create_template') }}" class="btn btn-primary">
      <i class="bi bi-plus-circle"></i> Create Template
    </a>
  </div>

  {% if templates %}
    <div class="row">
      {% for template in templates %}
        <div class="col-md-6 mb-3">
          <div class="card shadow-sm h-100">
            <div class="card-body">
              <h5 class="card-title" style="color: var(--royal-purple);">
                {{ template.name }}
              </h5>
              {% if template.description %}
                <p class="card-text text-muted">{{ template.description }}</p>
              {% endif %}
              
              <div class="mt-3">
                <h6 class="text-muted mb-2">
                  <i class="bi bi-bag-fill"></i> Options ({{ template.options.count() }})
                </h6>
                {% if template.options.count() > 0 %}
                  <ul class="list-unstyled mb-0">
                    {% for option in template.options[:5] %}
                      <li class="mb-1">
                        <span class="badge bg-secondary">{{ option.option_type }}</span>
                        {{ option.option_name }} - ${{ "%.2f"|format(option.price) }}
                      </li>
                    {% endfor %}
                    {% if template.options.count() > 5 %}
                      <li class="text-muted"><small>+ {{ template.options.count() - 5 }} more...</small></li>
                    {% endif %}
                  </ul>
                {% else %}
                  <p class="text-muted mb-0"><small>No options added yet</small></p>
                {% endif %}
              </div>
              
              <div class="mt-3">
                <a href="{{ url_for('events.edit_template_options', template_id=template.id) }}" 
                   class="btn btn-sm btn-outline-primary">
                  <i class="bi bi-pencil-fill"></i> Edit Options
                </a>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-info">
      <i class="bi bi-info-circle-fill"></i> 
      No event templates yet. Create your first template to get started!
    </div>
  {% endif %}

  <div class="mt-4">
    <a href="{{ url_for('events.manage_events') }}" class="btn btn-outline-secondary">
      <i class="bi bi-arrow-left"></i> Back to Events
    </a>
  </div>
{% endblock %}
