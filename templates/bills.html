{% extends 'base.html' %}

{% block title %}Bills - BecauseImStuck{% endblock %}

{% block content %}
  <div class="d-flex align-items-center justify-content-between mb-3">
    <h1 class="h3 mb-0"><i class="bi bi-file-text"></i> Missouri House Bills</h1>
  </div>

  {% if bills %}
    <div class="list-group shadow-sm">
      {% for b in bills %}
        {% set bill_id = b.number if b.number else b.id %}
        {% set bill_title = b.title if b.title else b.description %}
        <a class="list-group-item list-group-item-action" href="{{ url_for('bills.bill_detail', bill_id=bill_id) }}">
          <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{ bill_id }}</h5>
            {% if b.sponsor %}<small class="text-muted">Sponsor: {{ b.sponsor }}</small>{% endif %}
          </div>
          {% if bill_title %}
            <p class="mb-1">{{ bill_title }}</p>
          {% endif %}
          {% if b.status or b.last_action %}
            <small class="text-muted">
              {% if b.status %}<span class="me-2">Status: {{ b.status }}</span>{% endif %}
              {% if b.last_action %}<span>Last action: {{ b.last_action }}</span>{% endif %}
            </small>
          {% endif %}
        </a>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-custom">
      <i class="bi bi-info-circle"></i> No bills found or remote fetch failed.
    </div>
  {% endif %}
{% endblock %}
