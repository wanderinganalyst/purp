{% extends 'base.html' %}

{% block title %}Sign Up - BecauseImStuck{% endblock %}

{% block content %}
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow">
        <div class="card-header bg-success text-white">
          <h4 class="mb-0"><i class="bi bi-person-plus"></i> Create an Account</h4>
        </div>
        <div class="card-body">
          <form method="post" action="{{ url_for('auth.signup') }}">
            <!-- Account Information -->
            <h5 class="border-bottom pb-2 mb-3"><i class="bi bi-person-circle"></i> Account Information</h5>
            
            <div class="row mb-3">
              <div class="col-md-6">
                <label for="username" class="form-label">Username *</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="bi bi-person"></i></span>
                  <input type="text" class="form-control" id="username" name="username" 
                         required minlength="3" maxlength="150" 
                         pattern="[a-zA-Z0-9_]+" 
                         title="Username must be 3-150 characters and contain only letters, numbers, and underscores"
                         placeholder="Choose a username">
                </div>
                <div class="form-text">3-150 characters, letters, numbers, and underscores only</div>
              </div>
              
              <div class="col-md-6">
                <label for="role" class="form-label">Account Type *</label>
                <select class="form-select" id="role" name="role">
                  <option value="regular" selected>Regular User (read-only)</option>
                  <option value="power">Power User (full access)</option>
                  <option value="candidate">Candidate (can create events & manage staffers)</option>
                  <option value="admin">Admin (full system access)</option>
                </select>
                <div class="form-text">Candidates can create campaign events and manage staffers. Admins have full platform access.</div>
              </div>
            </div>
            
            <div class="row mb-3">
              <div class="col-md-6">
                <label for="password" class="form-label">Password *</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="bi bi-lock"></i></span>
                  <input type="password" class="form-control" id="password" name="password" 
                         required minlength="10" 
                         pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9]).{10,}$" 
                         title="Password must be at least 10 characters with one uppercase, one lowercase, and one special character"
                         placeholder="Enter password">
                </div>
                <div class="form-text">Min 10 chars: uppercase, lowercase, special character</div>
              </div>
              
              <div class="col-md-6">
                <label for="verify_password" class="form-label">Verify Password *</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="bi bi-lock-fill"></i></span>
                  <input type="password" class="form-control" id="verify_password" name="verify_password" 
                         required minlength="10" placeholder="Re-enter password">
                </div>
              </div>
            </div>
            
            <!-- Address Information -->
            <h5 class="border-bottom pb-2 mb-3 mt-4"><i class="bi bi-geo-alt"></i> Address Information</h5>
            <p class="text-muted small">We use your address to find your state representatives</p>
            
            <div class="row mb-3">
              <div class="col-md-8">
                <label for="street_address" class="form-label">Street Address *</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="bi bi-house"></i></span>
                  <input type="text" class="form-control" id="street_address" name="street_address" 
                         required maxlength="255" placeholder="123 Main St">
                </div>
              </div>
              
              <div class="col-md-4">
                <label for="apt_unit" class="form-label">Apt/Unit</label>
                <input type="text" class="form-control" id="apt_unit" name="apt_unit" 
                       maxlength="50" placeholder="Apt 4B">
              </div>
            </div>
            
            <div class="row mb-3">
              <div class="col-md-5">
                <label for="city" class="form-label">City *</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="bi bi-building"></i></span>
                  <input type="text" class="form-control" id="city" name="city" 
                         required maxlength="100" placeholder="Jefferson City">
                </div>
              </div>
              
              <div class="col-md-3">
                <label for="state" class="form-label">State *</label>
                <input type="text" class="form-control" id="state" name="state" 
                       required maxlength="2" minlength="2" 
                       pattern="[A-Z]{2}" placeholder="MO" 
                       title="2-letter state code (e.g., MO)">
              </div>
              
              <div class="col-md-4">
                <label for="zipcode" class="form-label">Zip Code *</label>
                <input type="text" class="form-control" id="zipcode" name="zipcode" 
                       required pattern="\d{5}(-\d{4})?" 
                       placeholder="65101" 
                       title="5-digit zip code or 9-digit zip+4 (e.g., 12345 or 12345-6789)">
              </div>
            </div>
            
            <hr class="my-4">
            
            <div class="d-grid">
              <button type="submit" class="btn btn-success btn-lg">
                <i class="bi bi-person-plus"></i> Create Account
              </button>
            </div>
          </form>
          
          <div class="text-center mt-3">
            <p class="mb-0">Already have an account? <a href="{{ url_for('auth.login') }}" class="btn btn-outline-primary btn-sm">Log In</a></p>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
