{% extends 'base.html' %}

{% block title %}Compose Message - BecauseImStuck{% endblock %}

{% block content %}
  <div class="mb-4">
    <h1 class="h2 mb-1" style="color: var(--royal-purple);">
      <i class="bi bi-envelope-paper-fill"></i> Compose Message
    </h1>
    <p class="text-muted mb-0">Send a message to your representative or senator</p>
  </div>

  <div class="card shadow-sm" style="border-left: 4px solid var(--light-purple);">
    <div class="card-body">
      <form method="post" action="{{ url_for('messages.compose') }}">
        <!-- Recipient Selection -->
        <div class="mb-3">
          <label for="recipient_type" class="form-label">
            <i class="bi bi-person-check-fill"></i> Send To <span class="text-danger">*</span>
          </label>
          <select class="form-select" id="recipient_type" name="recipient_type" required>
            <option value="">-- Select Recipient --</option>
            {% if user_reps.representative %}
              <option value="representative">
                My Representative: {{ user_reps.representative.name }} (District {{ user_reps.representative.district }})
              </option>
            {% endif %}
            {% if user_reps.senator %}
              <option value="senator">
                My Senator: {{ user_reps.senator.name }} (District {{ user_reps.senator.district }})
              </option>
            {% endif %}
          </select>
          <small class="form-text text-muted">
            <i class="bi bi-info-circle"></i> You can only message your own representatives
          </small>
        </div>

        <!-- Subject -->
        <div class="mb-3">
          <label for="subject" class="form-label">
            <i class="bi bi-tag-fill"></i> Subject <span class="text-danger">*</span>
          </label>
          <input type="text" 
                 class="form-control" 
                 id="subject" 
                 name="subject" 
                 placeholder="What is your message about?"
                 maxlength="255"
                 required>
        </div>

        <!-- Message Content -->
        <div class="mb-3">
          <label for="content" class="form-label">
            <i class="bi bi-chat-left-text-fill"></i> Message <span class="text-danger">*</span>
          </label>
          <textarea class="form-control" 
                    id="content" 
                    name="content" 
                    rows="8" 
                    placeholder="Share your thoughts, concerns, or questions..."
                    maxlength="5000"
                    required></textarea>
          <small class="form-text text-muted">
            <i class="bi bi-info-circle"></i> Maximum 5000 characters
          </small>
        </div>

        <!-- Action Buttons -->
        <div class="d-flex gap-2">
          <button type="submit" class="btn" style="background: var(--royal-purple); color: white;">
            <i class="bi bi-send-fill"></i> Send Message
          </button>
          <a href="{{ url_for('messages.inbox') }}" class="btn btn-outline-secondary">
            <i class="bi bi-x-circle"></i> Cancel
          </a>
        </div>
      </form>
    </div>
  </div>

  <!-- Tips Section -->
  <div class="card mt-4" style="background: var(--pale-purple); border: none;">
    <div class="card-body">
      <h5 class="card-title" style="color: var(--deep-purple);">
        <i class="bi bi-lightbulb-fill"></i> Tips for Effective Messages
      </h5>
      <ul class="mb-0">
        <li>Be clear and concise about your concern or question</li>
        <li>Include your full name and address to verify you're a constituent</li>
        <li>Be respectful and professional in your tone</li>
        <li>Focus on one issue per message for clarity</li>
        <li>Include specific bill numbers if applicable</li>
      </ul>
    </div>
  </div>
{% endblock %}
